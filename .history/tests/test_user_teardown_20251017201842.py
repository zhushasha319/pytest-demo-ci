def test_user_lifecycle